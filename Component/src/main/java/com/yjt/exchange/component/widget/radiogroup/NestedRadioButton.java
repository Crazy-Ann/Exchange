package com.hynet.heebit.components.widget.radiogroup;import android.content.Context;import android.content.res.TypedArray;import android.util.AttributeSet;import android.view.View;import com.hynet.heebit.components.R;import com.hynet.heebit.components.widget.radiogroup.listener.AddNestedRadioButtonListener;import androidx.annotation.IdRes;import androidx.annotation.NonNull;import androidx.appcompat.widget.AppCompatRadioButton;public class NestedRadioButton extends AppCompatRadioButton {    private @IdRes    int clickableParentResourceId = View.NO_ID;    public NestedRadioButton(@NonNull Context context) {        super(context);    }    public NestedRadioButton(@NonNull Context context, @NonNull AttributeSet attrs) {        super(context, attrs);        initAttr(context, attrs);    }    public NestedRadioButton(@NonNull Context context, @NonNull AttributeSet attrs, int defStyleAttr) {        super(context, attrs, defStyleAttr);        initAttr(context, attrs);    }    private void initAttr(@NonNull Context context, @NonNull AttributeSet attrs) {        TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.NestedRadioButton);        clickableParentResourceId = typedArray.getResourceId(R.styleable.NestedRadioButton_nrb_clickableParent, View.NO_ID);    }    @Override    protected void onAttachedToWindow() {        super.onAttachedToWindow();        int id = getId();        if (id == View.NO_ID) {            id = View.generateViewId();            setId(id);        }        attachToParentNestedRadioGroup((View) getParent());        if (clickableParentResourceId != View.NO_ID) {            attachClickableParent((View) getParent());        }    }    private void attachClickableParent(View view) {        if (view != null) {            if (view.getId() == clickableParentResourceId) {                view.setOnClickListener(new OnClickListener() {                    @Override                    public void onClick(View v) {                        NestedRadioButton.this.setChecked(true);                    }                });            } else if (view.getParent() instanceof View) {                attachClickableParent((View) view.getParent());            }        }    }    private void attachToParentNestedRadioGroup(View view) {        if (view == null) {            throw new ClassCastException("NestedRadioButton should be under a NestedRadioGroup");        } else if (view instanceof AddNestedRadioButtonListener) {            ((AddNestedRadioButtonListener) view).addNestedRadioButton(this);        } else if (view.getParent() instanceof View) {            attachToParentNestedRadioGroup((View) view.getParent());        } else {            throw new ClassCastException("NestedRadioButton should be under a NestedRadioGroup");        }    }}